## 2024-05-22 - React 17 Debounce & State Updates
**Learning:** React 17 does not automatically batch state updates in asynchronous callbacks (like `setTimeout`). Naive debounce implementations that recreate the handler on every render cause two issues: 1) Performance degradation due to handler recreation and child re-renders. 2) "Lost Updates" correctness bug where rapid changes to different fields are discarded because the debounce closure captures stale arguments or is reset.
**Action:** Implement debounce using `useRef` to hold the timer and the callback function. This ensures stability across renders and access to the latest state/arguments without needing to recreate the handler. Use functional state updates `setParams(prev => ...)` to ensure atomic updates based on latest state.
